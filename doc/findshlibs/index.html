<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `findshlibs` crate."><meta name="keywords" content="rust, rustlang, rust-lang, findshlibs"><title>findshlibs - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../findshlibs/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Crate findshlibs</p><div class="block version"><p>Version 0.5.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all findshlibs's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class="location"></p><script>window.sidebarCurrent = {name: "findshlibs", ty: "mod", relpath: "../"};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/findshlibs/lib.rs.html#1-363" title="goto source code">[src]</a></span><span class="in-band">Crate <a class="mod" href="">findshlibs</a></span></h1><div class="docblock"><h1 id="findshlibs" class="section-header"><a href="#findshlibs"><code>findshlibs</code></a></h1>
<p>Find the set of shared libraries currently loaded in this process with a
cross platform API.</p>
<p>The API entry point is the <code>TargetSharedLibrary</code> type and its
<code>SharedLibrary::each</code> trait method implementation.</p>
<h2 id="example" class="section-header"><a href="#example">Example</a></h2>
<p>Here is an example program that prints out each shared library that is
loaded in the process and the addresses where each of its segments are
mapped into memory.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">findshlibs</span>;
<span class="kw">use</span> <span class="ident">findshlibs</span>::{<span class="ident">Segment</span>, <span class="ident">SharedLibrary</span>, <span class="ident">TargetSharedLibrary</span>};

<span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="ident">TargetSharedLibrary</span>::<span class="ident">each</span>(<span class="op">|</span><span class="ident">shlib</span><span class="op">|</span> {
        <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">shlib</span>.<span class="ident">name</span>().<span class="ident">to_string_lossy</span>());

        <span class="kw">for</span> <span class="ident">seg</span> <span class="kw">in</span> <span class="ident">shlib</span>.<span class="ident">segments</span>() {
            <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;    {}: segment {}&quot;</span>,
                     <span class="ident">seg</span>.<span class="ident">actual_virtual_memory_address</span>(<span class="ident">shlib</span>),
                     <span class="ident">seg</span>.<span class="ident">name</span>());
        }
    });
}</pre></div>
<h2 id="supported-oses" class="section-header"><a href="#supported-oses">Supported OSes</a></h2>
<p>These are the OSes that <code>findshlibs</code> currently supports:</p>
<ul>
<li>Linux</li>
<li>macOS</li>
</ul>
<p>If a platform is not supported then a fallback implementation is used that
does nothing.  To see if your platform does something at runtime the
<code>TARGET_SUPPORTED</code> constant can be used.</p>
<p>Is your OS missing here? Send us a pull request!</p>
<h2 id="addresses" class="section-header"><a href="#addresses">Addresses</a></h2>
<p>Shared libraries' addresses can be confusing. They are loaded somewhere in
physical memory, but we generally don't care about physical memory
addresses, because only the OS can see that address and in userspace we can
only access memory through its virtual memory address. But even &quot;virtual
memory address&quot; is ambiguous because it isn't clear whether this is the
address before or after the loader maps the shared library into memory and
performs relocation.</p>
<p>To clarify between these different kinds of addresses, we borrow some
terminology from <a href="http://searchfox.org/mozilla-central/rev/13148faaa91a1c823a7d68563d9995480e714979/tools/profiler/lul/LulMain.h#17-51">LUL</a>:</p>
<blockquote>
<ul>
<li>
<p><strong>SVMA</strong> (&quot;Stated Virtual Memory Address&quot;): this is an address of a
symbol (etc) as it is stated in the symbol table, or other
metadata, of an object.  Such values are typically small and
start from zero or thereabouts, unless the object has been
prelinked.</p>
</li>
<li>
<p><strong>AVMA</strong> (&quot;Actual Virtual Memory Address&quot;): this is the address of a
symbol (etc) in a running process, that is, once the associated
object has been mapped into a process.  Such values are typically
much larger than SVMAs, since objects can get mapped arbitrarily
far along the address space.</p>
</li>
<li>
<p><strong>&quot;Bias&quot;</strong>: the difference between AVMA and SVMA for a given symbol
(specifically, AVMA - SVMA).  The bias is always an integral
number of pages.  Once we know the bias for a given object's
text section (for example), we can compute the AVMAs of all of
its text symbols by adding the bias to their SVMAs.</p>
</li>
</ul>
</blockquote>
</div><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="linux/index.html" title="findshlibs::linux mod">linux</a></td><td class="docblock-short"><p>Linux-specific implementation of the <code>SharedLibrary</code> trait.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="unsupported/index.html" title="findshlibs::unsupported mod">unsupported</a></td><td class="docblock-short"><p>The fallback implementation of the <a href="../trait.SharedLibrary.html">SharedLibrary
trait</a> that does nothing.</p>
</td></tr></table><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.Avma.html" title="findshlibs::Avma struct">Avma</a></td><td class="docblock-short"><p>Actual virtual memory address.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Bias.html" title="findshlibs::Bias struct">Bias</a></td><td class="docblock-short"><p>Virtual memory bias.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Svma.html" title="findshlibs::Svma struct">Svma</a></td><td class="docblock-short"><p>Stated virtual memory address.</p>
</td></tr></table><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.IterationControl.html" title="findshlibs::IterationControl enum">IterationControl</a></td><td class="docblock-short"><p>Control whether iteration over shared libraries should continue or stop.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.SharedLibraryId.html" title="findshlibs::SharedLibraryId enum">SharedLibraryId</a></td><td class="docblock-short"><p>Represents an ID for a shared library.</p>
</td></tr></table><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2>
<table><tr class="module-item"><td><a class="constant" href="constant.TARGET_SUPPORTED.html" title="findshlibs::TARGET_SUPPORTED constant">TARGET_SUPPORTED</a></td><td class="docblock-short"><p>An indicator if this platform is supported.</p>
</td></tr></table><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<table><tr class="module-item"><td><a class="trait" href="trait.Segment.html" title="findshlibs::Segment trait">Segment</a></td><td class="docblock-short"><p>A mapped segment in a shared library.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.SharedLibrary.html" title="findshlibs::SharedLibrary trait">SharedLibrary</a></td><td class="docblock-short"><p>A trait representing a shared library that is loaded in this process.</p>
</td></tr></table><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<table><tr class="module-item"><td><a class="type" href="type.TargetSharedLibrary.html" title="findshlibs::TargetSharedLibrary type">TargetSharedLibrary</a></td><td class="docblock-short"><p>The <a href="./trait.SharedLibrary.html"><code>SharedLibrary</code> trait</a>
implementation for the target operating system.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "findshlibs";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>