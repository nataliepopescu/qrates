<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `features` mod in crate `cargo`."><meta name="keywords" content="rust, rustlang, rust-lang, features"><title>cargo::core::features - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../cargo/index.html'><div class='logo-container rust-logo'><img src='../../../rust-logo.png' alt='logo'></div></a><p class="location">Module features</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></div><p class="location"><a href="../../index.html">cargo</a>::<wbr><a href="../index.html">core</a></p><script>window.sidebarCurrent = {name: "features", ty: "mod", relpath: "../"};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/cargo/core/features.rs.html#1-509" title="goto source code">[src]</a></span><span class="in-band">Module <a href="../../index.html">cargo</a>::<wbr><a href="../index.html">core</a>::<wbr><a class="mod" href="">features</a></span></h1><div class="docblock"><p>Support for nightly features in Cargo itself.</p>
<p>This file is the version of <code>feature_gate.rs</code> in upstream Rust for Cargo
itself and is intended to be the avenue for which new features in Cargo are
gated by default and then eventually stabilized. All known stable and
unstable features are tracked in this file.</p>
<p>If you're reading this then you're likely interested in adding a feature to
Cargo, and the good news is that it shouldn't be too hard! To do this you'll
want to follow these steps:</p>
<ol>
<li>
<p>Add your feature. Do this by searching for &quot;look here&quot; in this file and
expanding the macro invocation that lists all features with your new
feature.</p>
</li>
<li>
<p>Find the appropriate place to place the feature gate in Cargo itself. If
you're extending the manifest format you'll likely just want to modify
the <code>Manifest::feature_gate</code> function, but otherwise you may wish to
place the feature gate elsewhere in Cargo.</p>
</li>
<li>
<p>To actually perform the feature gate, you'll want to have code that looks
like:</p>
</li>
</ol>

<div class='information'><div class='tooltip compile_fail'>ⓘ<span class='tooltiptext'>This example deliberately fails to compile</span></div></div><div class="example-wrap"><pre class="rust rust-example-rendered compile_fail">
<span class="kw">use</span> <span class="ident">core</span>::{<span class="ident">Feature</span>, <span class="ident">Features</span>};

<span class="kw">let</span> <span class="ident">feature</span> <span class="op">=</span> <span class="ident">Feature</span>::<span class="ident">launch_into_space</span>();
<span class="ident">package</span>.<span class="ident">manifest</span>().<span class="ident">features</span>().<span class="ident">require</span>(<span class="ident">feature</span>).<span class="ident">chain_err</span>(<span class="op">|</span><span class="op">|</span> {
    <span class="string">&quot;launching Cargo into space right now is unstable and may result in \
     unintended damage to your codebase, use with caution&quot;</span>
})<span class="question-mark">?</span>;</pre></div>
<p>Notably you'll notice the <code>require</code> function called with your <code>Feature</code>, and
then you use <code>chain_err</code> to tack on more context for why the feature was
required when the feature isn't activated.</p>
<ol start="4">
<li>Update the unstable documentation at
<code>src/doc/src/reference/unstable.md</code> to include a short description of
how to use your new feature. When the feature is stabilized, be sure
that the Cargo Guide or Reference is updated to fully document the
feature and remove the entry from the Unstable section.</li>
</ol>
<p>And hopefully that's it! Bear with us though that this is, at the time of
this writing, a very new feature in Cargo. If the process differs from this
we'll be sure to update this documentation!</p>
</div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.CliUnstable.html" title="cargo::core::features::CliUnstable struct">CliUnstable</a></td><td class="docblock-short"><p>A parsed representation of all unstable flags that Cargo accepts.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Feature.html" title="cargo::core::features::Feature struct">Feature</a></td><td class="docblock-short"></td></tr><tr class="module-item"><td><a class="struct" href="struct.Features.html" title="cargo::core::features::Features struct">Features</a></td><td class="docblock-short"></td></tr></table><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.Edition.html" title="cargo::core::features::Edition enum">Edition</a></td><td class="docblock-short"><p>The edition of the compiler (RFC 2052)</p>
</td></tr></table><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2>
<table><tr class="module-item"><td><a class="constant" href="constant.SEE_CHANNELS.html" title="cargo::core::features::SEE_CHANNELS constant">SEE_CHANNELS</a></td><td class="docblock-short"></td></tr></table><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<table><tr class="module-item"><td><a class="fn" href="fn.channel.html" title="cargo::core::features::channel fn">channel</a></td><td class="docblock-short"><p>Returns the current release channel (&quot;stable&quot;, &quot;beta&quot;, &quot;nightly&quot;, &quot;dev&quot;).</p>
</td></tr><tr class="module-item"><td><a class="fn" href="fn.enable_nightly_features.html" title="cargo::core::features::enable_nightly_features fn">enable_nightly_features</a></td><td class="docblock-short"><p>Forcibly enables nightly features for this thread.</p>
</td></tr><tr class="module-item"><td><a class="fn" href="fn.maybe_allow_nightly_features.html" title="cargo::core::features::maybe_allow_nightly_features fn">maybe_allow_nightly_features</a></td><td class="docblock-short"><p>Allows nightly features to be enabled for this thread, but only if the
development channel is nightly or dev.</p>
</td></tr><tr class="module-item"><td><a class="fn" href="fn.nightly_features_allowed.html" title="cargo::core::features::nightly_features_allowed fn">nightly_features_allowed</a></td><td class="docblock-short"><p>This is a little complicated.
This should return false if:</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../";window.currentCrate = "cargo";</script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>